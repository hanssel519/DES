Presentation Deadline-Based Transmission Mechanism for IPTV Services over Wireless Networks

 
Abstract

Internet Protocol Television (IPTV) services over Internet and wireless networks have been increasing rapidly in recent years. Video streaming over time-varying and error-prone wireless networks poses many challenges because it has stringent delay and jitter constraints and requires a smooth packet transmission rate. To overcome such issues, a presentation deadline-based cross-layer design for improving the QoS of IPTV services over wireless networks is introduced. The proposed cross-layer design uses the presentation timestamps in the RTP packet header to derive a presentation deadline for each MAC frame. Subsequently, the wireless Access Point (AP) employs the presentation deadline and the number of retries to determine whether a MAC frame needs to be sent or not. Additionally, the MAC frame size can adapt to the wireless channel conditions. Numerical results demonstrate that the proposed transmission mechanism for video frames can avoid a waste of wireless bandwidth resources on transmitting lateness MAC frames. Thus, the proposed cross-layer design achieves a lower lateness loss rate and better application layer goodput for IPTV services.

Keywords: IPTV; Lateness loss; Presentation timestamps; Video streaming; Wireless networks.

1  Introduction
More recently, IPTV services have been increasing rapidly due to the significant growth of bandwidth in wired and wireless access networks. Particularly, owing to the explosive growth of the amount of handheld devices such as laptops, smart phones and mobile TV sets, the demand of IPTV services over wireless networks [1-3] such as WLAN, 3G/4G, and WiMAX has been growing tremendously. However, to support IPTV services over wireless networks is still a challenging task because of the higher bit error rate in wireless links. To study the performance of IPTV services over wireless networks, several performance tests have been conducted in the literature [4][5]. Testing results indicated that the delay jitter and packet loss rate induced in wireless networks still need to be further improved for IPTV services.  
To improve the QoS of IPTV services over wireless networks, several cross-layer designs were presented in the literature [6-10]. These cross-layer designs aim to enable interactions between several protocol layers for achieving better performance. For example, according to the results in [11-16], the QoS of video transmission over wireless networks was demonstrated to be further improved based on the cross-layer information.
The paper [11] proposed a novel cross-layer packet prioritization scheme to overcome the limitations of conventional video prioritization schemes for IPTV services. The proposed scheme in [11] achieves a significant performance improvement over conventional video prioritization schemes in terms of packet utilization ratio for video streaming, direct frame loss ratio, and PSNR. In [12], an adaptive cross-layer fragmentation scheme was proposed to provide reliable and QoS-based IPTV services over the IEEE 802.11 WLAN. The fragmentation approach considered both the loss ratio and MAC overhead ratio, but it did not take the random backoff effect into consideration. Additionally, based on the observation of Round-Trip Time (RTT) variability, the work in [13] proposed adaptive cross-layer schemes for multimedia delivery over the time-varying wireless channels, including the MAC layer retry limit, the application layer FEC control, and the fragment size. Authors of [14] proposed the cross-layer design that dynamically adjusts the video bit rate at the RTP layer of the video server and the modulation and coding scheme (MCS) at the MAC layer of the base station based on the fed back channel quality indicators (CQIs) from user equipments (UEs). Subband CQIs are used by the MAC layer of the base station to determine the proper MCS for the link adaption. Wideband CQIs are used for the video bit rate adaption at the RTP layer of the video server.
It is well-known that the timing or timestamp information is mandatory for video streaming services. Thus, the study [15] presented a deadline-aware scheduling algorithm for video streaming applications over a wireless channel. The presented method adopts the Decoding Timestamp (DTS) to calculate the deadline and slows down the transmission of streams to users with favorite channel conditions until their deadline is approaching. In [16], the authors proposed a time-based adaptive retry (TAR) mechanism for MPEG-like video streaming over IEEE 802.11 WLANs. TAR dynamically determines whether to send or discard a packet based on its retransmission deadline instead of adopting a static retry limit. The retransmission deadline for each video packet is determined based on the temporal relationship and error propagation characteristics of different video frames.
Based on the researches mentioned above, it is extremely necessary to adapt the MAC fragment size to the time-varying wireless channel conditions. For IPTV services, the stringent delay and jitter constraints must be met since the video frames violating their presentation deadlines will be dropped (i.e., lateness loss) at the receiver. Undoubtedly, the presentation deadlines of all video frames must be considered in the cross-layer design for improving the video playout quality. Consequently, the cross-layer design that takes both the MAC fragment size and the presentation deadline into consideration is proposed in this work. Simulation results show that the presented cross-layer design can improve the goodput of IPTV services and avoid a waste of wireless bandwidth resources on transmitting lateness MAC frames. 
To summarize, the main contributions of this paper are twofold. First, a presentation deadline-based transmission mechanism for video frames is proposed to improve the QoS of IPTV services. The major difference between our proposed cross-layer scheme and most conventional ones [6-14] is that our proposed scheme considers the timing information at the RTP layer. Compared with the cross-layer schemes in [15] and [16], our proposed cross-layer mechanism has a simpler decision rule of transmission. Second, the MAC layer throughput of IEEE 802.11 WLANs is analyzed. The analytical result is used to adjust the MAC fragment size for optimizing the MAC layer throughput. 
The rest of this paper is organized as follows. Section 2 delineates the proposed cross-layer design for WLANs. In Section 3, the MAC layer throughput of WLANs is analyzed and expressed in terms of the channel bit error rate and the fragment size. Several experimental examples are given in Section 4. Finally, the concluding remarks are made in Section 5. 

2  Proposed Cross-Layer Design for 
IPTV Services Over WLANs
For IPTV services, RTP (Real-time Transport Protocol) [17] and MPEG TS (Transport Stream) [18] are frequently used. For these two application (APP) protocols, presentation timestamps (PTS) and decoding timestamps (DTS) are employed for the video synchronization purpose. For example, a 32-bit timestamp field is allocated in the RTP protocol header. The timestamps of RTP packets are utilized to calculate the jitter encountered in the network. Additionally, the timestamps can be used to determine the presentation times of video frames at the receiver. With the help of presentation timestamps, the video playout quality can be maintained. However, in wireless networks packet retransmissions may yield extra packet delay. The video packet with longer delay may miss its presentation deadline and be discarded at the receiver. The packet drops resulting from missing the presentation deadlines are named lateness losses. 
To improve the lateness loss rate of video frames, a cross-layer design based on the wireless channel conditions and the presentation timestamps of video frames is proposed in this work. The physical (PHY) layer, the MAC layer and the APP layer are involved in the presented cross-layer scheme, as shown in Fig. 1. The cross-layer information, which includes the presentation timestamps at the APP layer and the channel bit error rate at the PHY layer, is used by the MAC layer for improving the playout quality of video streaming services over wireless networks. In this paper, the wireless AP with such a cross-layer function is named the streaming agent, as shown in Fig. 1. The streaming agent must have a packet sniffer function that can decode the RTP packet header.

 

Figure 1 Architecture of proposed cross-layer design

In the proposed scheme, the presentation timestamp in the RTP packet header is employed to determine whether a MAC frame need be transmitted by the streaming agent. If a MAC frame will miss its presentation deadline when it arrives at the receiver, it need not be sent by the streaming agent. The decision rule for the MAC frame transmission is described as follows. Let the presentation timestamp and the size of the i-th MAC frame be Ti and Fi, respectively. Notably, several MAC frames may have the same presentation timestamp if they belong to the same APP video frame. Assume the first MAC frame of a video stream is transmitted by the streaming agent at time a. The initial playout delay at the mobile station is set to d. The propagation delay of the wireless channel is £_. The transmission rate of the wireless network at time t is R(t). Then the presentation deadline of the first MAC frame at the receiver, P1, is defined by
 .                       (1)
As to the presentation deadline of the i-th MAC frame, it is defined to be
 .                          (2)
Hence, if the i-th MAC frame is scheduled for transmission at time t, the following inequality must hold so that it will not miss its presentation deadline at the mobile station.
  .                         (3)
It follows that
 .	 (4)
That is, when inequality (4) is satisfied, the i-th MAC frame must be transmitted (or retransmitted) by the streaming agent; otherwise, it is discarded immediately. Inequality (4) is derived according to the presentation deadline constraint (3). Using (4) for transmission decision can avoid unnecessary transmissions of lateness MAC frames. Hence, the consumption of wireless bandwidth resources is reduced, yielding an improvement on the APP layer goodput. As one knows, a video frame at the APP layer may be very large so that fragmentation may be needed in lower protocol layers. Hence, if a MAC fragment is dropped, all subsequent fragments belonging to the same APP video frame with the dropped one need not be transmitted. This strategy also avoids a waste of wireless bandwidth resources on transmitting useless MAC frames. Notably, in this paper the transport protocol UDP is assumed for video streaming applications since the RTP/UDP still remains popular for IPTV services.
The other strategy for the MAC frame transmission is the adaptive fragment size. Since the frame error rate depends not only on the bit error rate but also the frame size, the optimal fragment size must change with the bit error rate or the channel condition. For example, if the wireless channel is modeled as a two-state Markov chain [19], which is plotted in Fig. 2 and also known as the Gilbert channel model, different fragment sizes must be adopted in the G (Good) and B (Bad) channel states. Therefore, in the proposed cross-layer design, the fragment size of a MAC frame depends on the channel bit error rate that is estimated by the PHY layer. In the next section, the MAC layer throughput, in terms of the channel bit error rate and the retry limit, is analyzed. Based on the analysis result, the optimal fragment sizes under various channel conditions can be determined.

 

Figure 2 Two-state Gilbert model for the wireless channel

3  Throughput Analysis for IEEE
 802.11 WLAN
This work focuses on the last-hop wireless network within a home. Since the minimum contention window size CWmin is 31 and the number of users within a home is small, the collisions among stations are negligible. Additionally, the WLAN performance is dominated by the transmission error resulting from the multipath problem encountered in a room, rather than the contention problem. As a result, the simplified WLAN model that consists of a wireless AP and a single mobile station is considered in this section. The DCF (Distributed Coordination Function) access mode is also assumed in the WLAN model. The main purpose of this section is to understand how the wireless channel throughput reacts to the channel bit error rate and the fragment size. In the considered WLAN model, video packets are transmitted from the AP to the mobile station. The mobile station receives video packets and replies acknowledgments (ACKs) only if the received packets are correct. Other uplink traffic from the mobile station to the AP is assumed to be negligible when a streaming service is undertaking. Subsequently, the relationship among the MAC layer throughput S, the channel bit error rate e, and the MAC fragment size L is derived under the full load assumption at the AP.
In the following analysis, each IP packet coming from the wired network is assumed to be 1500 bytes. The (i+1)-st MAC fragment size Li (in bytes), not including the MAC layer header, of an IP packet is represented by
             (5)
That is, the total number of fragments of each IP packet equals n0+1. Denoting the MAC header length by H bits, the frame error rate of the (i+1)-st MAC fragment, pi, can be expressed by
 .                        (6)
If the retry limit is NR, then the probability PS,i that the (i+1)-st MAC fragment is successfully transmitted equals
 .	                   (7)
Accordingly, the failure probability of the transmission of the (i+1)-st MAC fragment is equal to PF,i = 1ƒ{PS,i.
Let the transmission time of the (i+1)-st MAC frame be denoted by TD,i, then TD,i = (H+8Li)/R, where R is the transmission rate of the WLAN. Next, let the required cycle times of each successful and failed MAC frame transmissions be denoted by TS,i and TF,i, respectively, then we have
 ,                  (8)
	 ,                    (9)
where TƒÖ and TA are the transmission times of the physical header and the acknowledgment frame, respectively. SIFS and DIFS are the Short IFS (Inter Frame Space) and DCF IFS, respectively. TO is the timeout duration for retransmission. In our analysis, the propagation delay in the wireless network is ignored.
To resolve the transmission collision or error problem, the exponential backoff algorithm is used in IEEE 802.11 WLAN standards. When a frame transmission fails, the frame retransmission must be deferred for a backoff time. The backoff time (in slot_time) is randomly selected from the contention window [0, 2mƒ{1], where m is the stage parameter of the contention window. In IEEE 802.11 standards, the minimum stage of the contention window is set to be 5. To avoid successive transmission failures, the contention window is doubled after each transmission failure. That is, after the j-th retransmission failure, the backoff time is randomly selected from the contention window [0, 25+jƒ{1]. The purpose of increasing the contention window is to decrease the collision or failure probability of subsequent retransmissions. However, the maximum stage parameter m is set to 10  in  IEEE  802.11
 
 
 
Figure 3 Required time of the first MAC frame of an IP packet to be transmitted successfully after the j-th retry


 
(a) The previous (i-th) fragment transmission is failed

 
(b) The previous (i-th) fragment transmission is successful
Figure 4 Required time of the (i + 1)-st MAC fragment of an IP packet to be transmitted successfully after the j-th retry

 
standards. That is, the maximum contention window is [0, 210ƒ{1]. Such a design is to prevent from yielding unacceptable transmission delay. To summarize, in the exponential backoff algorithm, whenever a frame transmission is successful, the backoff stage is reset to 5. If the  transmission fails, the backoff  stage is increased by 1 and remains unchanged whenever it reaches 10. In the following, the case that the retry limit NR is not less than 4 is first considered. For each IP packet, the first MAC fragment always requires a random backoff time. This backoff time depends on the condition of the previous MAC frame transmission. Hence, the average backoff time of the first fragment of an IP packet at its j-th retransmission is expressed by

 
 .             (10)
The first and the second terms in (10) are the required backoff times when the last fragment of the previous IP packet is transmitted successfully and unsuccessfully, respectively. Since the retry limit satisfies NR „d 4, an unsuccessful frame transmission reveals that the backoff stage reaches 10 at the moment of the next MAC frame transmission. So the average backoff time equals (210ƒ{1)„e slot_time/2, given that the previous MAC frame transmission fails. Subsequently, the average throughput (excluding the MAC header) of the first fragment of an IP packet can be written as

 ,     (11)
where   .   The  denominator  of  (11)  can  be
regarded as the mean time needed for the first MAC frame of an IP packet to be transmitted, given that it is transmitted successfully. Figure 3 illustrates the required time of the first MAC frame (i = 0) of an IP packet to be transmitted successfully.
Next, the average backoff time of the (i+1)-st fragment of an IP packet is considered, where 1 „T i „T n0. As explained in the previous paragraph, the backoff stage depends only on the success or failure of the previous frame transmission. The backoff time of the (i+1)-st fragment depends on the transmission result of the i-th fragment. According to the IEEE 802.11 standards, if a MAC fragment is transmitted successfully, no backoff time is required but instead a short SIFS period is needed before the first transmission (j = 0) of the next MAC fragment, as shown in Fig. 4. It follows that

   (12)
Similarly, the average throughput of the (i+1)-st fragment of an IP packet can be obtained as follows.

 ,      (13)
where   and   = PS,iƒ{1 „e SIFS + PF,i-1 „e  . Illustration of the required transmission time of the (i+1)-st MAC fragment to be transmitted successfully is given by Fig. 4. Finally, under the full load assumption the overall average throughput at the MAC layer becomes
 .           	           (14)
When the retry limit NR is smaller than 4, the average backoff times given by (10) and (12) must be revised. The formulas of average backoff times for the cases 1 „T NR „T 3 can be found in the appendix.

4  Performance Evaluation
In this section, computer simulations are conducted to validate the proposed cross-layer design. Network simulator 2 (NS2) [20] is used to simulate the wired network from the video server to the streaming agent, as shown in Fig. 1. Simulations of the wired network are to generate various network jitters for video packets. As to the wireless network, the IEEE 802.11 MAC protocol is implemented using the C++ program. The DCF access mode is simulated in this paper. Additionally, the streaming video traffic over the WLAN is in the downlink path, i.e., from the streaming agent to the mobile station, and no uplink traffic exists except the ACK frames. Furthermore, the effects of FEC are ignored at the APP and MAC layers. 

4.1 Throughput versus the Fragment Size
The relationship between the fragment size L and the MAC layer throughput S has been analyzed in the previous section. To verify the accuracy of the analytical result (14) derived in Section 3, simulations are also conducted. In the first simulation scenario, the WLAN consists of a streaming agent and a single mobile station. The streaming agent is assumed to be fully loaded and always has IP packets for transmission. The length of each IP packet is assumed to be 1500 bytes. Other related simulation parameters for IEEE 802.11 WLAN are listed in Table 1. 

Table 1 Simulation parameters for IEEE 802.11 WLAN
                 Parameter                               Value
                  Transmission Rate                   11 Mbps
                  MAC Header Length               272 Bits
                  Physical Header Length          192 Bits
                  ACK Frame Length                 112 Bits
                  Initial CW                                 31
                  Retry Limit NR                         4
                  Maximum Stage for CW          10
                  SIFS                                         10 ƒÝs
                  DIFS                                        50 ƒÝs
                  slot_time                                  20 ƒÝs
                  Timeout TO                              73 ƒÝs


Figure 5 shows the normalized throughput versus the fragment size L under different bit error rates. Both the analysis and simulation results are included. According to Fig. 5, the analytical results are very close to the simulation results, demonstrating that our analysis result (14) is accurate. Additionally, if the fragment size L is smaller, such as less than 200 bytes, the MAC protocol overhead ratio becomes larger, yielding lower throughput. When the bit error rate e is 10ƒ{5, the throughput increases with the fragment size initially and then becomes almost saturated. However, if the bit error rate e is greater than 5„e10ƒ{5, the throughput degrades at larger fragment sizes. Therefore, under the channel condition of a low bit error rate, it is unnecessary to fragment an IP packet. While under the channel condition of a high bit error rate, IP packets are mandatory to be fragmented. For example, according to Fig. 5, the optimal fragment size is about 200 bytes when the bit error rate is 10ƒ{4. Consequently, the optimal fragment sizes for MAC frames under different bit error rates can be determined based on the analytical result (14) derived in Section 3.

 
Figure 5 Throughput versus fragment size (NR = 4)

4.2 Evaluation of Proposed Cross-Layer Design
Next, the performance of the proposed cross-layer design over the IEEE 802.11 WLAN is evaluated using simulations. In simulations, the MPEG-4 encoded video, Jurassic Park I [21], is used as the video streaming source. This MPEG-4 video is VBR with average bit rate 770 kbps and its frame rate is 25 fps. Hence, the presentation timestamps of video frames are evenly spaced by 40 ms. In the following, all video frames are transmitted from the video server to the streaming agent, and are jittered by the cross-traffic when they traverse the wired network depicted in Fig. 1. Pareto ON-OFF traffic pattern with parameters (burst time, idle time) = (400 ms, 600 ms) is chosen as the cross-traffic in simulations. The cross-traffic load in the wired network is denoted by ƒâ. Different values of ƒâ result in different network jitters for video packets. The streaming agent forwards the video packets to the mobile station according to the cross-layer design described in Section 2. Other simulation parameters for the IEEE 802.11 WLAN are listed in Table 1. Here, the constant transmission rate 11 Mbps is assumed in the simulations. The proposed cross-layer design uses inequality (4) and the number of retries to determine whether a MAC frame need be sent or not, while in the conventional scheme all MAC frames are always transmitted unless the number of retries exceeds the retry limit NR. Both the proposed mechanism and the conventional scheme can fragment an IP packet according to the channel conditions.
        In the second simulation scenario, the cross-traffic load ƒâ in the wired network is set to 0.6 for disturbing video packets. Only a streaming agent and a single mobile station exist in the WLAN. Additionally, no background traffic exists in the WLAN except the considered streaming video traffic. The bit error rate of the wireless channel is fixed at 10ƒ{4 and the playout delay at the mobile station is set to 5s. Figure 6 presents the lateness loss rate of APP video frames. The lateness loss rate is defined as the ratio of the number of lateness losses of video frames to the number of video frames transmitted at the video server. Notably, the lateness losses can only occur at the mobile station in the conventional scheme, while in the proposed cross-layer design the lateness losses can only occur at the streaming agent. Because a larger fragment size leads to a larger frame error rate, more frame retransmissions are required when a larger fragment size is used. As a result, a larger MAC frame incurs a larger delay/jitter in the WLAN. It yields that the lateness loss rate increases with the fragment size. Additionally, according to Fig. 6, the proposed scheme has a lower lateness loss rate as compared with the conventional one. 

 
Figure 6 Lateness loss rate of video frames (ƒâ = 0.6)

 
Figure 7 Transmission loss rate of video frames (ƒâ = 0.6)

Next, Fig. 7 depicts the transmission loss rate of APP video frames in the WLAN. The video frame discarded by the streaming agent due to the number of retries exceeding the retry limit NR is called the transmission loss. The transmission loss rate is defined as the ratio of the number of transmission losses to the number of video frames transmitted at the video server. By Fig. 7, the performance of the proposed cross-layer design is similar to that of the conventional scheme in terms of the transmission loss rate.
As to the goodput observed at the mobile station, it is illustrated in Fig. 8. In computer networks, goodput is defined to be the application layer throughput. That is, the number of useful information bits delivered by the network to a certain destination per unit of time. The amount of data considered excludes protocol overhead bits as well as retransmitted data packets. By Fig. 8, the goodput decreases as the fragment size increases. From the aspect of MAC layer throughput, the conventional scheme is much larger than the proposed cross-layer design. However, the proposed cross-layer scheme performs as well as the conventional scheme in terms of the APP layer goodput. This is because in the conventional scheme some of the MAC frames received at the mobile station are dropped due to missing their presentation deadlines. That is, in the conventional scheme part of the wireless bandwidth resources is wasted on transmitting lateness MAC frames that finally miss their presentation deadlines. On the contrary, the proposed cross-layer scheme does not transmit the MAC frames that will miss their presentation deadlines. As one knows, the video playout quality at the mobile station actually depends on the APP layer goodput. Therefore, the conventional scheme consumes more wireless bandwidth resources while the video playout quality is not enhanced or even degraded, compared with the proposed cross-layer scheme.

 
Figure 8 Goodput/throughput of video frames (ƒâ = 0.6)

       In the third example, the performance of the cross-layer design under the scenario with background traffic in the WLAN is investigated. The WLAN consists of a streaming agent and two mobile stations. The streaming video traffic coming from the video server via the wired network is forwarded to one of the mobile stations by the streaming agent. The background traffic in the WLAN is randomly generated and transmitted from the streaming agent to the other mobile station. The background traffic load in the WLAN ƒâw is set to be 0.5. The channel bit error rate e is 10ƒ{5. Other simulation parameters are similar to those in the second simulation scenario. The lateness loss rates of video frames in the proposed cross-layer design and the conventional scheme are compared in Fig. 9. The results of Fig. 9 are very different from those in Fig. 6. By Fig. 9, if the traffic load in the WLAN is heavy, such as ƒâw = 0.5, the lateness loss rate grows significantly when the fragment size is less than about 300 bytes, even though the bit error rate is low (e = 10ƒ{5). This is because the protocol overhead ratio becomes significant when the fragment size is very small. Hence, the traffic overhead in the WLAN grows significantly and yields large latency. Consequently, the lateness loss rate increases significantly. From Fig. 9, the proposed cross-layer design performs better than the conventional scheme in terms of the lateness loss rate. On the other hand, the corresponding goodput/throughput degrades seriously at smaller fragment sizes, as shown in Fig. 10. This is because a smaller fragment size results in a higher lateness loss rate. According to the results of Figs. 6 and 9, the fragment size must not be too large when the bit error rate is high, such as e = 10ƒ{4. That is, an IP packet must be fragmented under a high channel error rate condition. If the bit error rate is low, such as e = 10ƒ{5, then a larger fragment size can achieve a better performance.  Restated,

 
Figure 9 Lateness loss rate of video frames (ƒâ = 0.6, ƒâw = 0.5)

 
Figure 10 Goodput/throughput of video frames (ƒâ = 0.6, ƒâw = 0.5)
it is unnecessary to fragment an IP packet when the channel condition is good enough.  Such  conclusions  are consistent with those in Fig. 5.
        Subsequently, the wireless channel is assumed to be time-varying and is modeled by a two-state Markov chain [19] given by Fig. 2. The transition rates ƒÑ and ƒÒ in Fig. 2 are set to 30 secƒ{1 and 10 secƒ{1 [19], respectively. The bit error rate in state G is assumed to be 10ƒ{5, while it equals 10ƒ{4 in state B. According to Fig. 5, the optimal fragment sizes in states G and B are set to 1500 bytes and 200 bytes, respectively.
In the fourth simulation scenario, the network configuration is the same as the previous example. The cross-traffic load in the wired network is ƒâ =0.3 and the playout delay is set to 5s at the mobile station. Figures 11 and 12 show the lateness loss rate and the goodput of video frames, respectively, under various background traffic loads ƒâw in the WLAN. When ƒâw is smaller than 0.35, the lateness loss rate is negligible so that the corresponding goodput is almost nondegraded. However, when ƒâw is greater than 0.35, the lateness loss rate grows significantly according to Fig. 11. Thus, serious goodput/throughput degradation occurs, as shown in Fig. 12. Additionally, the lateness loss rate of the proposed scheme is significantly smaller than that of  the conventional one according to the

 
Figure 11 Lateness loss rate of video frames (ƒâ = 0.3)


 
Figure 12 Goodput/throughput of video frames (ƒâ = 0.3)
        
results of Fig. 11. 
        By Fig. 12, the MAC layer throughput of the conventional scheme is larger than that of the proposed scheme. However, the APP layer goodput performance of the conventional scheme is much worse than that of the proposed design, especially when ƒâw > 0.35. The reason has been explained in Fig. 8. From the results of Fig. 12, one can conclude that under a heavy load condition, such as ƒâw > 0.35, the conventional scheme consumes much more wireless bandwidth resources while the video playout quality degrades more seriously.
Finally, the cross-traffic load ƒâ in the wired network is increased to 0.6 while the other simulation parameters remain unchanged as the previous scenario. Figures 13 and 14 show the resulting lateness loss rate and the goodput/throughput of video frames, respectively. Since the network jitter is increased, the lateness loss rate in Fig. 13 grows significantly, compared with Fig. 11. It follows that the maximum achievable goodput decreases, as shown in Fig. 14. Similarly, the proposed cross-layer design performs much better than the conventional scheme in terms of the APP layer goodput. Thus, the proposed cross-layer design that uses the presentation deadline information and the adaptive fragment size policy is outstanding.
To summarize,  the performance comparisons between

 
Figure 13 Lateness loss rate of video frames (ƒâ = 0.6)


 
Figure 14 Goodput/throughput of video frames (ƒâ = 0.6)
the proposed and conventional schemes include four aspects:
1)	Lateness loss rate performance: According to the results of Figs. 6, 9, 11, and 13, the lateness loss rate of the proposed scheme is significantly better than that of the conventional one.
2)	Transmission loss rate performance: According to the results of Fig. 7, the transmission loss rates of the proposed and the conventional schemes are similar.
3)	APP layer goodput performance: According to the results of Figs. 10, 12, and 14, the goodput performance of the proposed scheme is also better than that of the conventional one.
4)	Consumption of wireless bandwidth resources: According to the results of Figs. 8, 10, 12, and 14, the MAC layer throughput of the proposed scheme is significantly smaller than that of the conventional one. However, the APP layer goodput of the proposed scheme is better or at least similar, compared with the conventional one. Hence, the proposed cross-layer scheme consumes less wireless bandwidth resources while preserving better or similar APP layer goodput, compared with the conventional one.
Based on the comparisons listed above, the proposed cross-layer scheme is significantly better than the conventional one.

5  Conclusions
This article introduces the cross-layer design that uses the presentation timestamps of RTP packets to decide whether to send a MAC frame over the WLAN or not. At the streaming agent, each MAC frame can be sent over the wireless network only when the presentation deadline can be met and the number of retries is not over the retry limit NR. Additionally, the optimal fragment sizes for MAC frames under different channel error rates are analyzed theoretically. Based on the analytical results, the MAC frame sizes can adapt to the time-varying channel conditions to achieve higher throughput. Simulation results show that the proposed cross-layer design can achieve better APP layer goodput for video streaming/IPTV services. Furthermore, the proposed cross-layer design can avoid a waste of wireless bandwidth resources on transmitting lateness MAC frames that will be dropped at the mobile station due to missing their presentation deadlines. Although the proposed cross-layer design is demonstrated over the IEEE 802.11 WLAN, the mechanism can also be applied to unicast IPTV or video-on-demand services in wireless cellular networks such as WiMAX and 4G/5G networks. 
In this work, the optimal fragment size in wireless networks is determined by the channel bit error rate. However, in wireless networks the user equipment needs to report the CQI rather than the channel bit error rate to the base station for link adaption. Therefore, the relationship between the channel bit error rate and the CQI must be derived so that the optimal fragment size can be determined directly by the reported CQI. This will be our future work. 
